<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

	
<title>URL路由 CubePHP框架2.0开发文档 CubePHP框架 - 更好、更快、更强的PHP开发框架 - CubePHP官方网站</title>
<meta name="keywords" content="URL路由,CubePHP框架2.0开发文档,CubePHP框架,CubePHP,PHP框架,MVC框架,PHPMVC框架,gocuber,CubePHP框架 - 更好、更快、更强的PHP开发框架 - CubePHP官方网站">
<meta name="description" content="URL路由,CubePHP框架2.0开发文档,CubePHP框架,CubePHP,PHP框架,MVC框架,PHPMVC框架,gocuber,CubePHP框架 - 更好、更快、更强的PHP开发框架 - CubePHP官方网站">
<link href="/res/cube/css/style.css" rel="stylesheet" type="text/css" />

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?2df9ce934dc484bd6d51074b34da2854";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>





</head>
<body>


<div class="cube-container cube-header">
	<div class="site">
		<div class="title"><a href="/" title="CubePHP框架">CubePHP框架</a><em>Beta</em></div>
		<div class="subtitle">—— 更好、更快、更强的PHP开发框架</div>
	</div>
	<div class="logo"><a href="/" title="CubePHP"><img src="/res/cube/images/logo1.jpg" alt="CubePHP" /></a></div>
</div>

<div class="cube-nav">
	<div class="cube-container">
		<div class="cube-nav-brand"><a href="/">Cube</a></div>
		<div class="cube-nav-toggle"><div><span></span><span></span><span></span></div></div>
		<div class="cube-navbar">
			<ul class="cube-nav-left">
				<li><a href="/" title="CubePHP框架官方首页">首页</a></li>
				<li><a href="/download/" title="CubePHP框架下载">下载</a></li>
				<li><a href="/guide/2.0/" title="CubePHP框架开发文档" class="active">开发文档</a></li>
				<li><a href="/code/" title="CubePHP框架相关代码">代码</a></li>
				<li><a href="/extend/" title="CubePHP框架扩展">扩展</a></li>
				<li><a href="/demo/" title="CubePHP框架演示">演示</a></li>
			</ul>
			
		</div>
	</div>
	<div class="cube-clear"></div>
</div>

<div class="cube-container">
<div class="cube-breadcrumb">
	<a href="/">首页</a>
	 &raquo; <a href="/guide/">开发文档</a> &raquo; <a href="/guide/2.0/">2.0</a> &raquo; URL路由</div>
</div>

<div class="cube-container cube-change-layout">

    <div class="cube-big-layout cube-guide">
    <div class="cube-block">
		<div class="cube-title">URL路由</div>
		<div class="h1">URL路由</div>

<ul class="cube-catalog">
	<li><a href="#config"># 配置</a></li>
	<li><a href="#func"># 路由方法</a></li>
	<ul>
		<li><a href="#get"># get() 路由设置</a></li>
		<li><a href="#wildcard"># wildcard() 全局通配符限定</a></li>
		<li><a href="#domain"># domain() 子域名路由组</a></li>
	</ul>
	<li><a href="#closure"># 闭包路由</a></li>
	<ul>
		<li><a href="#closurebase"># 简单闭包</a></li>
		<li><a href="#closurewildcard"># 通配符闭包</a></li>
	</ul>
	<li><a href="#controller"># 控制器路由</a></li>
	<ul>
		<li><a href="#controllerbase"># 简单控制器路由</a></li>
		<li><a href="#controllerwildcard"># 通配符控制器路由</a></li>
	</ul>
	<li><a href="#groupdomain"># 子域名路由组</a></li>
	<li><a href="#defaultall"># 默认路由与全拦截路由</a></li>
	<ul>
		<li><a href="#default"># 默认路由</a></li>
		<li><a href="#all"># 全拦截路由</a></li>
	</ul>
</ul>

<div class="h2"><a name="config">#</a> 配置</div>

<p class="text">　　路由配置文件 /app/routes.php</p>


<div class="h2"><a name="func">#</a> 路由方法</div>

<div class="h3"><a name="get">get() 路由设置</a></div>

<p class="text">
　　get() 方法三个参数：<br />
　　第一个参数：访问url；<br />
　　第二个参数：路由规则，可以是一个闭包函数，也可以指定到控制器、动作；<br />
　　第三个参数：通配符限定规则；
</p>

<pre class="brush: php;">

// 简单闭包
Route::get('/', function(){
	echo 'hello';
});

// 指定到控制器
Route::get('hello', 'Demo@hello');

// 通配符限定
Route::get('detail/{id}/{name}', 'Demo@detail?id={id}&name={name}', ['id' => '[0-9]+', 'name' => '[a-z]+']);

</pre>


<div class="h3"><a name="wildcard">wildcard() 全局通配符限定</a></div>

<p class="text">　　使用 wildcard() 方法定义常用的全局约束通配符；格式 key => value ，其中 key 只能由小写字母组成，value 为正则；</p>

<pre class="brush: php;">

// 使用正则来设置通配符
Route::wildcard(array(
	'id'   => '[0-9]+',
	'name' => '[a-z]+',
	'year' => '[0-9]{4}',
	'all'  => '.*',
));

// 使用全局通配符
Route::get('detail/{id}', 'Article@detail?id={id}');

// 这样并不会覆盖全局通配符 这里的 ['id' => '[0-5]+'] 只作用于本次，只在本次有效
Route::get('class/{id}', 'Class@index?id={id}', ['id' => '[0-5]+']);

// 使用全局通配符
Route::get('news/{id}', 'News@detail?id={id}');

Route::get('{all}', function(){
	// 404
});

// ...
</pre>


<div class="h3"><a name="domain">domain() 子域名路由组</a></div>

<p class="text">　　domain() 方法用来为指定的域名设置一组路由规则，这组路由规则只在当前指定的域名下有效；例如给用户中心模块指定一个子域名 ucenter.gocuber.com</p>

<pre class="brush: php;">

Route::domain('ucenter.gocuber.com', function(){
    // ...
});

</pre>

<div class="h2"><a name="closure">#</a> 闭包路由</div>
<div class="h3"><a name="closurebase">简单闭包</a></div>

<pre class="brush: php;">

// 简单闭包
Route::get('/', function(){
	echo 'hello';
});

// 调用视图
Route::get('hello', function(){
	View::display('demo_welcome');
});

// 404页
Route::get('/', function(){
	View::display('page_404');
});

</pre>

<div class="h3"><a name="closurewildcard">通配符闭包</a></div>

<pre class="brush: php;">

Route::get('detail/{id}', function($id){
	echo $id;
});

Route::get('detail/{name}', function($name='cuber'){
	echo $name;
});

Route::get('news/{class}/{id}', function($class, $id){
	echo $class;
	echo $id;
}, ['class' => 'code|guide|demo']);

Route::get('list/{class}', function($class='code'){
	echo $class;
}, ['class' => '(code|guide|demo)?']);

// 相信你已经注意到这两条路由里的class了，他们是有区别的；

['class' => 'code|guide|demo']       // class 必须是三个其中的一个
['class' => '(code|guide|demo)']     // 同上

['class' => '(code|guide|demo)?']    // class 必须是三个其中的一个，或者没有
['class' => '(|code|guide|demo)']    // 同上
['class' => '|code|guide|demo']      // 同上

</pre>


<div class="h2"><a name="#controller">#</a> 控制器路由</div>

<p class="text">
　　控制器路由格式 '访问url', '控制器@动作?参数=值&参数=值'<br />
</p>

<div class="h3"><a name="#controllerbase">简单控制器路由</a></div>

<pre class="brush: php;">
Route::get('hello', 'Demo@welcome');

// 指定GET参数
Route::get('download', 'Article@detail?code=download');

</pre>

<div class="h3"><a name="#controllerwildcard">通配符控制器路由</a></div>

<pre class="brush: php;">

Route::get('detail/{id}', 'Article@detail?id={id}');

Route::get('article/{class}', 'Article@{class}', ['class' => 'code|guide|demo']);

Route::get('user/{code}/{id}', 'User@get?code={code}&id={id}', ['code' => '[a-z]+']);

</pre>


<div class="h2"><a name="groupdomain">#</a> 子域名路由组</div>

<p class="text">　　domain() 方法用来为指定的域名设置一组路由规则，这组路由规则只在当前指定的域名下有效；</p>

<pre class="brush: php;">

Route::domain('ucenter.gocuber.com', function(){

	// 这里设置的一组规则只在当前域下有效

	Route::get('hello', 'Ucenter\User@info');
	Route::get('edit', 'Ucenter\User@edit');
	// ...

});

</pre>


<div class="h2"><a name="defaultall">#</a> 默认路由与全拦截路由</div>

<div class="h3"><a name="default">默认路由</a></div>
<p class="text">　　默认路由 '/' ；当url中没有包含任何路由信息，如首页，就会执行 '/' 指定的控制器及动作；默认值为 'Index@index'</p>
<pre class="brush: php;">
Route::get('/', 'welcome');
</pre>

<div class="h3"><a name="all">全拦截路由</a></div>
<p class="text">　　使用通配符 ['all' => '.*'] 全部拦截</p>
<pre class="brush: php;">
Route::get('{all}', function(){}, ['all' => '.*']);
</pre>

<p class="text">　　如果将这行放在 routes.php 开始，将会全部拦截所有访问，如果放在结尾，将会拦截 routes.php 中配置之外的全部访问，相当于全部访问都需要配置在 routes.php 中；</p>

<pre class="brush: php;">
// 放在开始
Route::get('{all}', function(){
	echo '停服升级中..';
}, ['all' => '.*']);

// 放在结尾
Route::get('{all}', function(){
	// page_404
}, ['all' => '.*']);
</pre>


<br /><br /><br /><br /><br />	</div>
	</div><!-- /big -->

	
    <div class="cube-small-layout">
    <div class="cube-block">

    		<div class="cube-title">开发文档</div>
		<ul class="cube-menu">
		<li>开始</li><ul><li><a href="/guide/2.0/about/">简介</a></li><li><a href="/guide/2.0/down/">下载和安装</a></li><li><a href="/guide/2.0/app/">创建第一个应用</a></li></ul><li>基础知识</li><ul><li><a href="/guide/2.0/directory/">目录结构</a></li><li><a href="/guide/2.0/entrance/">入口文件</a></li><li><a href="/guide/2.0/urlmodel/">URL模式</a></li><li><a href="/guide/2.0/rewrite/">URL重写</a></li><li><a href="/guide/2.0/controller/">Controller 控制器</a></li><li><a href="/guide/2.0/view/">View 视图模板</a></li><li><a href="/guide/2.0/model/">Model 模型</a></li><li><a href="/guide/2.0/route/">URL路由</a></li><li><a href="/guide/2.0/autoload/">类自动加载</a></li><li><a href="/guide/2.0/rule/">开发规范</a></li><li><a href="/guide/2.0/exception/">异常处理</a></li></ul><li>数据库</li><ul><li><a href="/guide/2.0/dbbase/">数据库配置与使用基础</a></li><li><a href="/guide/2.0/dbquery/">数据库查询结构器</a></li><li><a href="/guide/2.0/dbmodel/">数据库模型(model)的使用</a></li><li><a href="/guide/2.0/dbtransaction/">数据库事务处理</a></li></ul><li>缓存</li><ul><li><a href="/guide/2.0/memcache/">Memcache</a></li><li><a href="/guide/2.0/redis/">Redis</a></li><li><a href="/guide/2.0/filecache/">文件缓存</a></li><li><a href="/guide/2.0/cachesession/">使用缓存存储SESSION</a></li></ul><li>类库及函数</li><ul><li><a href="/guide/2.0/func/">系统函数说明</a></li><li><a href="/guide/2.0/class/">系统类库说明</a></li><li><a href="/guide/2.0/session/">SESSION使用</a></li><li><a href="/guide/2.0/cookie/">COOKIE使用</a></li></ul><li>CLI命令行</li><ul><li><a href="/guide/2.0/cli/">以命令行方式运行</a></li></ul><li>扩展</li><ul><li><a href="/guide/2.0/smarty/">使用Smarty</a></li><li><a href="/guide/2.0/lib/">使用第三方库</a></li></ul>		</ul>
	
    </div>
    </div><!-- /small -->

</div><!-- /cube-container -->


	<div class="cube-container cube-footer">
		意见反馈邮箱 cuber@gocuber.com<br />
		版权所有 <span>&copy;</span> 2012-2018 goCuber.com Powered by <a href="/">CubePHP</a>
	</div>
	<div class="cube-top">TOP</div>
	

<script language="javascript" type="text/javascript">
/* 全局变量 */
var G = {
	'cubeUrl' : '/',
	'resUrl' : '/res/',
	'publicKey' : 0
};
</script>

<div class="cube-dn"><script src="https://s19.cnzz.com/z_stat.php?id=1272829783&web_id=1272829783" language="JavaScript"></script></div>

<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<script src="/res/cube/js/global.js"></script>

<script src="/res/global/js/syntaxhighlighter_2.1.382/scripts/shCore.js"></script>
<script src="/res/global/js/syntaxhighlighter_2.1.382/scripts/shBrushPhp.js"></script>
<link type="text/css" rel="stylesheet" href="/res/global/js/syntaxhighlighter_2.1.382/styles/shCore.css"/>
<link type="text/css" rel="stylesheet" href="/res/global/js/syntaxhighlighter_2.1.382/styles/shThemeDefault.css"/>
<script type="text/javascript">
SyntaxHighlighter.config.clipboardSwf = '/res/global/js/syntaxhighlighter_2.1.382/scripts/clipboard.swf';
SyntaxHighlighter.all();
</script>

</body>
</html>
