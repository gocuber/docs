<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

	
<title>CubePHP框架 —— 一个干净、轻便、快速、稳定、可扩展的PHP MVC框架 - CubePHP官方网站</title>
<meta name="keywords" content="CubePHP框架,CubePHP,PHP框架,MVC框架,PHPMVC框架,CubePHP框架 —— 一个干净、轻便、快速、稳定、可扩展的PHP MVC框架 - CubePHP官方网站">
<meta name="description" content="CubePHP框架,CubePHP,PHP框架,MVC框架,PHPMVC框架,CubePHP框架 —— 一个干净、轻便、快速、稳定、可扩展的PHP MVC框架 - CubePHP官方网站">
<link href="http://res.gocuber.com/res/cube/css/style.css" rel="stylesheet" type="text/css" />

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?2df9ce934dc484bd6d51074b34da2854";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>




</head>
<body>


<div class="cube-container cube-header">
	<div class="site">
		<div class="title"><a href="http://www.gocuber.com/" title="CubePHP框架">CubePHP框架</a><em>Beta</em></div>
		<div class="subtitle">—— 更好、更快、更强的PHP开发框架</div>
	</div>
	<div class="logo"><a href="http://www.gocuber.com/" title="CubePHP"><img src="http://res.gocuber.com/res/cube/images/logo1.jpg" alt="CubePHP" /></a></div>
</div>

<div class="cube-nav">
	<div class="cube-container">
		<div class="cube-nav-brand"><a href="#">Cube</a></div>
		<div class="cube-nav-toggle"><div><span></span><span></span><span></span></div></div>
		<div class="cube-navbar">
			<ul class="cube-nav-left">
				<li><a href="http://www.gocuber.com/" title="CubePHP框架官方首页">首页</a></li>
				<li><a href="http://www.gocuber.com/download/" title="CubePHP框架下载">下载</a></li>
				<li><a href="http://www.gocuber.com/guide/" title="CubePHP框架开发文档" class="active">开发文档</a></li>
				<li><a href="http://www.gocuber.com/code/" title="CubePHP框架相关代码">代码</a></li>
				<li><a href="http://www.gocuber.com/extend/" title="CubePHP框架扩展">扩展</a></li>
				<li><a href="http://www.gocuber.com/demo/" title="CubePHP框架演示">演示</a></li>
			</ul>

			
		</div>
	</div>
	<div class="cube-clear"></div>
</div>

<div class="cube-container">
<div class="cube-breadcrumb">
	<a href="http://www.gocuber.com/">首页</a>
	 &raquo; <a href="http://www.gocuber.com/guide/">开发文档</a> &raquo; URL路由</div>
</div>

<div class="cube-container cube-change-layout">

    <div class="cube-big-layout cube-guide">
    <div class="cube-block">
		<div class="cube-title">URL路由</div>
		<div class="h1">URL路由</div>

<ul class="cube-catalog">
	<li><a href="#config"># 配置与路由格式</a></li>
	<li><a href="#static"># 静态路由</a></li>
	<li><a href="#rule"># 规则路由</a></li>
	<li><a href="#regular"># 正则路由</a></li>
	<li><a href="#function"># 闭包路由</a></li>
	<li><a href="#defaultall"># 默认路由与全拦截路由</a></li>
	<ul>
		<li><a href="#default"># ['default'] 默认路由</a></li>
		<li><a href="#all"># ['all'] 全拦截路由</a></li>
	</ul>
</ul>

<div class="h2"><a name="config">#</a> 配置与路由格式</div>

<p class="text">　　路由的配置同样写在配置文件 config.php 中；如下：</p>

<pre class="brush: php;">
	$_G['route'] = array(

		'login'                => 'admin/login',               //静态路由
		'user/center'          => 'ucenter/user/center?id=10', //静态路由

		'view/(:0)'            => 'demo/view/?id={:1}',            //规则路由
		'list/(:a)'            => 'item/?p={:1}',                  //规则路由

		'/^detail/([0-9]+)$/i'              => 'demo/view/?id={:1}',   //正则路由
		'/^(user|news)\/list\/([0-9]+)$/i'  => '{:1}/list/?p={:2}',    //正则路由

		'helloworld'           => function(){echo 'Hello World';},      //闭包路由
		'list/(:a)/(:0)'       => function($p1,$p2){echo $p1 . $p2;},   //闭包路由

	);
</pre>


<p class="text">
　　路由格式： '访问url' => '模块/控制器/动作/?参数=值&参数=值'<br />
　　如果是默认模块则可以省略；如果是默认动作 index 同样也可以省略；
</p>



<div class="h2"><a name="static">#</a> 静态路由</div>

<p class="text">　　静态路由就是基本的简单的路由，不带任何规则及正则表达式的路由，通常只是简单的实现把访问url分配到相应的控制器/动作中；如下：</p>

<pre class="brush: php;">

'login' => 'admin/login',

'user/center' => 'ucenter/user/center',

'about' => 'view/?id=10', // 可传GET参数 $_GET['id'] = 10

// ...
</pre>



<div class="h2"><a name="rule">#</a> 规则路由</div>

<p class="text">　　规则路由就是由通配符组成的路由，通常只是简单匹配全数字、全字母、全部字符等；如下：</p>

<pre class="brush: php;">

// (:0) 匹配全部数字
'view/(:0)' => 'demo/view/?id={:1}',

// (:a) 匹配全部字母
'list/(:a)' => 'item/{:1}/',

// (:.) 匹配全部字符
'user/(:.)' => 'test/user/{:1}/',

// ...
</pre>

<p class="text">　　可以自定义常用的全局约束通配符；代码：</p>

<pre class="brush: php;">

$_G['route_wildcard'] = array(

	'id'   => '[0-9]+',
	'name' => '[a-z]+',
	'year' => '[0-9]{4}',

);

'list/(:name)' => 'item/{:1}/',

'view/(:year)/(:id)' => 'view?year={:1}&id={:2}',

// ...
</pre>

<div class="h2"><a name="regular">#</a> 正则路由</div>

<p class="text">　　正则路由就是由正则表达式组成的路由，必须以 / 开头；如下：</p>

<pre class="brush: php;">

'/^detail\/([0-9]+)$/i' => 'demo/view/?id={:1}',

'/^(user|news)\/list\/([0-9]+)$/i'  => '{:1}/list/?p={:2}',

// ...
</pre>

<p class="text">　　需要注意的是只有正则路由必须以 / 开头；其他路由开头不能加 /</p>


<div class="h2"><a name="function">#</a> 闭包路由</div>

<p class="text">　　可以使用闭包的方式定义一些简单的特殊需求的路由，直接写一个函数；代码：</p>

<pre class="brush: php;">

// 闭包路由
'about' => function(){
	echo 'Hello World';
},

'view/(:0)' => function($p1){
	echo $id;
},

'view/(:a)/(:0)' => function($p1,$p2){
	echo $p1 . $p2;
},

// ...
</pre>


<div class="h2"><a name="defaultall">#</a> 默认路由与全拦截路由</div>

<div class="h3"><a name="default">['default'] 默认路由</a></div>
<p class="text">　　当url中没有包含任何路由信息，如首页，就会执行 ['default'] 指定的控制器及动作；</p>

<pre class="brush: php;">

'default' => 'index/index', //可以省略，默认值是 index

</pre>


<div class="h3"><a name="all">['all'] 全拦截路由</a></div>
<p class="text">　　输入任何地址，或不输入都会执行 ['all'] 指定的控制器及动作；相当于其它路由全部无效；</p>

<pre class="brush: php;">

'all' => 'test/index',

</pre>


<br /><br /><br /><br /><br /><br />	</div>
	</div><!-- /big -->

	
    <div class="cube-small-layout">
    <div class="cube-block">

    		<div class="cube-title">开发文档</div>
		<ul class="cube-menu">
		<li>开始</li><ul><li><a href="http://www.gocuber.com/guide/about/">简介</a></li><li><a href="http://www.gocuber.com/guide/down/">下载和安装</a></li><li><a href="http://www.gocuber.com/guide/app/">创建第一个应用</a></li></ul><li>基础知识</li><ul><li><a href="http://www.gocuber.com/guide/directory/">目录结构</a></li><li><a href="http://www.gocuber.com/guide/entrance/">入口文件</a></li><li><a href="http://www.gocuber.com/guide/urlmodel/">URL模式</a></li><li><a href="http://www.gocuber.com/guide/rewrite/">URL重写</a></li><li><a href="http://www.gocuber.com/guide/controller/">Controller 控制器</a></li><li><a href="http://www.gocuber.com/guide/view/">View 视图模板</a></li><li><a href="http://www.gocuber.com/guide/model/">Model 模型</a></li><li><a href="http://www.gocuber.com/guide/module/">Module 模块</a></li><li><a href="http://www.gocuber.com/guide/route/">URL路由</a></li><li><a href="http://www.gocuber.com/guide/autoload/">类自动加载</a></li><li><a href="http://www.gocuber.com/guide/rule/">开发规范</a></li></ul><li>数据库</li><ul><li><a href="http://www.gocuber.com/guide/dbbase/">配置与使用基础</a></li><li><a href="http://www.gocuber.com/guide/dbquery/">查询结构器</a></li><li><a href="http://www.gocuber.com/guide/dbmodel/">数据库表model的使用</a></li><li><a href="http://www.gocuber.com/guide/dbtransaction/">数据库事务处理</a></li></ul><li>缓存</li><ul><li><a href="http://www.gocuber.com/guide/memcache/">Memcache</a></li><li><a href="http://www.gocuber.com/guide/redis/">Redis</a></li><li><a href="http://www.gocuber.com/guide/cachesession/">SESSION</a></li></ul><li>搜搜引擎</li><ul><li><a href="http://www.gocuber.com/guide/elasticsearch/">Elasticsearch</a></li></ul><li>类库及函数</li><ul><li><a href="http://www.gocuber.com/guide/func/">系统函数说明</a></li><li><a href="http://www.gocuber.com/guide/class/">系统类库说明</a></li><li><a href="http://www.gocuber.com/guide/session/">SESSION使用</a></li><li><a href="http://www.gocuber.com/guide/cookie/">COOKIE使用</a></li></ul><li>CLI命令行</li><ul><li><a href="http://www.gocuber.com/guide/cli/">以命令行方式运行</a></li></ul><li>扩展</li><ul><li><a href="http://www.gocuber.com/guide/smarty/">使用Smarty</a></li><li><a href="http://www.gocuber.com/guide/lib/">使用第三方库</a></li><li><a href="http://www.gocuber.com/guide/sae/">SAE环境下开发</a></li></ul>		</ul>
	
    </div>
    </div><!-- /small -->

</div><!-- /cube-container -->


	<div class="cube-container cube-footer">
		<a href="http://www.gocuber.com/feedback/">意见反馈</a><br />
		版权所有 <span>&copy;</span> 2012-2018 goCuber.com Powered by <a href="http://www.gocuber.com/">CubePHP</a>
	</div>
	<div class="cube-top">TOP</div>
	

<script language="javascript" type="text/javascript">
/* 全局变量 */
var G = {
	'cubeUrl' : 'http://www.gocuber.com/',
	'resUrl' : 'http://res.gocuber.com/res/',
	'apiUrl' : 'http://api.gocuber.com/',
	'cookieKey' : '',
	'publicKey' : 'C5FB1E04C706C8264624079F51B36EE19136E9D62984BE4CD955493D32A672C6E7EF4453B4094CA78E3D86E1FD57E8FE38E2F9CAA39C7A6F3C665E6CE30AB1F019CE7795224F10893945B5F2F3C16E4806BD2D2A54AB73D3B5C338147878495225EF1585B4A67E2A303363B7A47F86FBC875A5F28A3032C7705D4138A0C122DD',
	'cookieDomain' : 'gocuber.com'
};
</script>

<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<script src="http://res.gocuber.com/res/global/js/jquery.cookie.js"></script>
<script src="http://res.gocuber.com/res/global/js/rsa/BigInt.js"></script>
<script src="http://res.gocuber.com/res/global/js/rsa/Barrett.js"></script>
<script src="http://res.gocuber.com/res/global/js/rsa/RSA.js"></script>
<script src="http://res.gocuber.com/res/cube/js/global.js"></script>
<script src="http://res.gocuber.com/res/cube/js/user.js"></script>

<script src="http://res.gocuber.com/res/global/js/syntaxhighlighter_2.1.382/scripts/shCore.js"></script>
<script src="http://res.gocuber.com/res/global/js/syntaxhighlighter_2.1.382/scripts/shBrushPhp.js"></script>
<link type="text/css" rel="stylesheet" href="http://res.gocuber.com/res/global/js/syntaxhighlighter_2.1.382/styles/shCore.css"/>
<link type="text/css" rel="stylesheet" href="http://res.gocuber.com/res/global/js/syntaxhighlighter_2.1.382/styles/shThemeDefault.css"/>
<script type="text/javascript">
SyntaxHighlighter.config.clipboardSwf = 'http://res.gocuber.com/res/global/js/syntaxhighlighter_2.1.382/scripts/clipboard.swf';
SyntaxHighlighter.all();
</script>

</body>
</html>
