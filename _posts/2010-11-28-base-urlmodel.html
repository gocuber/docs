---
layout: default
title: 基础知识-URL模式
---
<div class="h1">URL模式</div>

<div class="catalog">
	<li><a href="#url"># 介绍</a></li>
	<li><a href="#default"># 普通模式</a></li>
	<li><a href="#pathinfo"># PATHINFO模式</a></li>
	<li><a href="#compatible"># 兼容模式</a></li>
	<li><a href="#custom"># 自定义模式</a></li>
</div>


<div class="h2"><a name="url">#</a> 介绍</div>
<p class="text">
　　URL模式，主要介绍如何从访问URL中把路由部分获取出来；得到模块控制器和动作；<br /><br />
　　一般情况下访问URL格式是这样的：<br />
　　http://localhost/index.php/模块/控制器/动作/<br /><br />
　　可以配置重写规则去掉URL中的入口文件：<br />
　　http://localhost/模块/控制器/动作/<br />
</p>

<p class="text">　　如果URL中没有输入路由部分，那么系统会访问默认模块 default 默认控制器 index 和默认动作 index ；因此下面的访问是等效的：<br /></p>
<pre class="brush: php;">

	http://localhost/
	http://localhost/index/
	http://localhost/default/index/
	http://localhost/default/index/index/

</pre>


<div class="h2"><a name="default">#</a> 普通模式</div>
<p class="text">　　普通模式也是默认模式，是通过服务器变量 $_SERVER['REQUEST_URI'] 中截取路由部分；支持绝大多数环境；
<br />
　　修改配置文件：<br />
</p>
<pre class="brush: php;">

	$_G['url_model']   = '1'; // 普通模式

</pre>

<p class="text">　　URL地址：<br />
</p>
<pre class="brush: php;">

	http://localhost/index.php/default/index/index/

</pre>

<p class="text">　　配置重写规则去掉URL中的入口文件，URL地址：<br />
</p>
<pre class="brush: php;">

	http://localhost/default/index/index/

</pre>

<div class="h2"><a name="pathinfo">#</a> PATHINFO模式</div>
<p class="text">　　PATHINFO模式，是通过服务器变量 $_SERVER['PATH_INFO'] 直接获取路由部分，因此比普通模式稍快一点；但是默认情况下只兼容apache环境；
<br />
　　修改配置文件：<br />
</p>
<pre class="brush: php;">

	$_G['url_model']   = '2'; // PATHINFO模式

</pre>

<p class="text">　　URL访问地址与普通模式一样；</p>


<div class="h2"><a name="compatible">#</a> 兼容模式</div>
<p class="text">　　兼容模式，是通过GET传递参数的方式来指定路由；极特殊情况下，当系统环境不支持以上两种模式的情况下，可以使用兼容模式；当然，系统环境支持以上两种模式的情况下也可以使用；
<br />
　　修改配置文件：<br />
</p>
<pre class="brush: php;">

	$_G['url_model']   = '3'; // 兼容模式
	$_G['get_route_param_name'] = 'r'; // GET参数名称 默认 r

</pre>

<p class="text">　　URL地址：<br />
</p>
<pre class="brush: php;">

	http://localhost/index.php?r=default/index/index

</pre>

<p class="text">　　当然可以配置重写规则去掉URL中的入口文件，URL地址：<br />
　　apache重写规则 （完整的重写规则请参考URL重写章节）：
</p>
<pre class="brush: php;">

	RewriteRule ^(.*)$ ./index.php?r=$1 [L]

</pre>
<p class="text">　　URL访问地址：<br />
</p>
<pre class="brush: php;">

	http://localhost/default/index/index/

</pre>


<div class="h2"><a name="custom">#</a> 自定义模式</div>
<p class="text">　　自定义模式，就是通过自己写的函数方法来获取路由；
<br />
　　代码：<br />
</p>
<pre class="brush: php;">

	$_G['url_model']   = '4'; // 自定义模式
	$_G['get_route_function_name']   = '_getRoute'; // 函数方法名称 默认 _getRoute

	// 函数
	function _getRoute()
	{
		return isset($_GET['r']) ? $_GET['r'] : '';
	}
</pre>


<br /><br /><br /><br /><br /><br /><br />