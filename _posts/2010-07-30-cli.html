---
layout: default
title: CLI 命令行
---
<div class="h1">CLI 命令行</div>

<div class="catalog">
	<li><a href="#cli"># 介绍</a></li>
	<li><a href="#example"># CLI实例</a></li>
	<li><a href="#page"># CLI入口文件</a></li>
	<li><a href="#argv"># 参数处理</a></li>
</div>

<div class="h2"><a name="cli">#</a> 介绍</div>

<p class="text">　　CLI是Command Line Interface的缩写，即命令行界面。CubePHP框架可以运行在CLI下；例如：配置crontab定时运行任务；定时备份数据，统计数据，更新缓存等；</p>


<div class="h2"><a name="example">#</a> CLI实例</div>

<p class="text">　　新建控制器 /apps/cron/controllers/DemoController.php</p>
<pre class="brush: php;">

	class DemoController extends Controller
	{
		public function welcomeAction()
		{
			echo 'Welcome to MFPHP !';
		}
	}

</pre>


<div class="h2"><a name="page">#</a> CLI入口文件</div>

<p class="text">　　可以为CLI脚本程序单独写一个入口文件；cli.php；只比index.php入口文件多一行代码；需要定义常量 IS_CLI<br />define('IS_CLI',true);</p>
<pre class="brush: php;">
	define('SYSTEM_DIR','/data0/webapp/');
	define('IS_CLI',true); //需要定义常量 IS_CLI

	require(SYSTEM_DIR.'mf/common/mf.php');
	MF::G()->run();
</pre>

<p class="text">　　入口文件 cli.php 可以存放在任意目录中；如果有服务器权限的话，尽量放到非 web 目录；</p>
<p class="text">　　这时我们可以在linux或windows下打开终端，进入到入口所在目录，运行：</p>
<pre class="brush: php;">
	# cd /webapp/
	# php cli.php cron/demo/welcome
</pre>

<p class="text">　　终端显示：Welcome to MFPHP !</p>


<div class="h2"><a name="argv">#</a> 参数处理</div>
<p class="text">　　cli参数处理；如：php cli.php cron/demo/welcome -name "you name" -id 10</p>

<pre class="brush: php;">
	class DemoController extends Controller
	{
		public function welcomeAction()
		{
			echo $this->_argv['-name'];
			echo $this->_argv['-id'];
		}
	}
</pre>

<p class="text">　　打开终端，运行：</p>
<pre class="brush: php;">
	# cd /webapp/
	# php cli.php cron/demo/welcome -name "you name" -id 10
</pre>

<p class="text">　　终端显示：</p>
<pre class="brush: php;">
you name
10
</pre>


<p class="text">　　CLI参数格式：</p>
<pre class="brush: php;">
php cli.php 模块/控制器/动作 -参数 值 -参数 值
</pre>


<br /><br /><br /><br /><br /><br />